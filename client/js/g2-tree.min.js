/*!
* g2-tree.js by @guilhermegom.es
* Copyright 2016 Guilherme Gomes
* http://www.apache.org/licenses/LICENSE-2.0.txt
*/
"use strict";angular.module("g2-tree",[]).directive("g2Tree",function(){return{restrict:"E",scope:{tree:"=",onSelect:"&",onAddNode:"&",onRemoveNode:"&"},template:'<div><g2-tree-node ng-repeat="node in tree" node="node" add-button="onAddNode" remove-button="onRemoveNode"></g2-tree-node><button type="button" class="btn btn-default btn-xs glyphicon glyphicon-plus" ng-if="onAddNode()" ng-click="addNode(this,tree);"> </button></div>',controller:function(e){e.unselAll=function(n){for(i in n)n[i].selected=!1,n[i].children&&e.unselAll(n[i].children)},e.addNode=function(n,o){var d=e.onAddNode();d&&(o.name?(o.children||(o.children=[]),d(o.children,o),o.showChildren=!0):d(o,null))},e.removeNode=function(n,o){var d=e.onRemoveNode();d&&d(o)},e.$on("selectNode",function(n,o){var d=e.onSelect();d(o),e.unselAll(e.tree),o.selected=!0}),e.$on("addTreeNode",e.addNode),e.$on("removeTreeNode",e.removeNode)}}}).directive("g2TreeNode",function(e){return{restrict:"E",scope:{node:"=",addButton:"=",removeButton:"="},template:'<div class="g2-tree-node"><div><span class="g2-folder glyphicon" ng-class="{\'glyphicon-folder-open\':!hasChildren(node)||node.showChildren,\'glyphicon-folder-close\':hasChildren(node)}" ng-click="ocFolder(node);"></span><span ng-class="{\'g2-selected-node\':node.selected}" ng-click="selectNode(node);">{{node.name}}</span><button type="button" class="btn btn-default btn-xs glyphicon glyphicon-plus" ng-if="addButton()" ng-click="addNodeBtnPressed(node);"> </button><button type="button" class="btn btn-default btn-xs glyphicon glyphicon-minus" ng-if="removeButton()" ng-click="removeNodeBtnPressed(node);"> </button></div></div><div class="g2-children" ng-if="node.children" ng-hide="!node.showChildren"><g2-tree-node ng-repeat="child in node.children" node="child" add-button="addButton" remove-button="removeButton"></g2-tree-node></div>',controller:function(e){e.selectNode=function(n){e.$emit("selectNode",n)},e.addNodeBtnPressed=function(n){e.$emit("addTreeNode",n)},e.removeNodeBtnPressed=function(n){e.$emit("removeTreeNode",n)},e.ocFolder=function(e){e.showChildren=!e.showChildren},e.hasChildren=function(e){return e.children&&e.children.length>0}},compile:function(n){var o,d=n.contents().remove();return function(n,t){o||(o=e(d)),o(n,function(e){t.append(e)})}}}});